# Git Convention
## < 목표 >
### Git과 관련된 다양한 컨벤션을 이해하고 올바르게 사용할 수 있다.

---

## 1. Git 커밋 메시지 스타일 가이드
### 출처: https://udacity.github.io/git-styleguide/
### **대주제 1번은 해당 원문을 의역한 자료입니다.**
### 1.1 Git 커밋 메시지 구성
```markdown
type(detail): Subject
<!-- 한 줄을 띄어주자! -->
body(Optional)
<!-- 한 줄을 띄어주자! -->
footer(Optional)
```
커밋 메시지는 1) 제목(타입 + 주제) 2) 본문(세부 내용) 3) 꼬리말로 이루어져 있다.
제목은 필수적이지만 본문과 꼬리말은 선택사항이다.

### 1.2 커밋 메시지 타입의 종류
- feat: 새로운 기능을 추가한 경우
- fix: 버그를 해결한 경우
- docs: 문서화와 관련된 작업을 진행한 경우
- style: 포맷팅, 세미콜론 수정 등 프로덕션 코드 상의 수정 사항이 없는 경우
- refactor: 프로덕션 코드를 리팩토링한 경우
- test: 테스트를 추가하거나 리팩토링한 경우(프로덕션 코드 수정 X)
- chore: 빌드, 패키지 매니저 설정 등의 작업과 관련된 경우(프로덕션 코드 수정 X)

### 1.3 제목 스타일 가이드(영문 기준)
1. 제목의 길이는 50자 이내로 작성해야 한다
2. 제목의 첫 글자는 대문자로 시작해서 마침표 없이 끝나야 한다.
3. 커밋의 목적을 잘 나타낼 수 있도록 명령문의 형태로 작성해야 한다
    - ex) feat: **Change** ~~~

### 1.4 본문
1. 모든 커밋이 본문을 필요로 할 정도로 복잡하진 않으므로 선택적으로 작성한다.
2. 복잡하거나 문맥에 대한 설명이 필요할 경우 작성한다.
3. 어떻게(how)가 아닌 무엇을(what), 왜(why) 했는지 잘 나타나도록 작성한다.
4. 제목과 한 줄 띄어 작성해야 하며, 한 줄 당 72자를 넘기지 않는다.(영문 기준)

### 1.5 꼬리말
1. 푸터 역시 선택적으로 작성하며, 일반적으로 이슈 번호를 트래킹하는 데 사용된다. 

### 1.6 예시
```markdown
docs: 회원가입 api 문서 request/response 스키마 추가

포스트맨 API 문서에서 Swagger로 옮기는 작업 진행 중

해결 이슈: #123
추가 진행 이슈: #456, #789
```

### 1.7 참고사항
1. 커밋은 기능 단위로 진행한다.(연관 없는 변경사항을 포함하지 않도록 한다)
2. 서술식이 아닌 개조식으로 작성한다.
3. 이모지를 활용하는 것도 고려해보자.
    - gitmoji: https://gitmoji.dev/

<br>

## 2. Git 브랜치 전략
### 2.1 Git Flow
깃 브랜치 전략이란 협업 과정에서 사용하는 깃 레포지토리를 효과적으로 관리하기 위한 Workflow다.
어떤 브랜치들을 관리할 것인지, 각 브랜치들의 네이밍은 어떻게 할 것인지 등을 정하고 관리한다.
협업의 단위로 정한 깃 브랜치 전략에 따라
1. 최신 브랜치가 무엇이고, 새 브랜치를 생성할 때 어떤 브랜치로부터 시작할 지
2. 자신의 브랜치를 어느 브랜치에 PR(MR)해야 할 지
3. 배포와 관련된 작업을 어떻게 진행해야 할 지
에 대한 혼란을 줄이고 유연하게 업무를 진행할 수 있다.
대표적인 깃 브랜치 관리 전략은 1) git-flow 2) github-flow가 존재한다.

### 2.2 Git-flow
main(master) 브랜치부터 hotfix, release, develop, feature로 브랜치를 관리하는 전략이다.
1. main: 실제 서비스 환경에 배포되는 브랜치
2. hotfix: 배포 중 긴급하게 수정해야 할 버그를 고치기 위해 활용하는 브랜치
3. release: 다음 배포 버전을 준비하기 위한 브랜치로 main에 PR하게 될 브랜치
4. develop: release 브랜치에 PR하기 위한 브랜치
5. feature: 기능 단위의 브랜치로, develop에 PR하게 될 브랜치

#### 2.2.1 Git-flow 적용 가이드
1. main에 Merge될 코드는 테스트를 마친 코드여야 한다.
2. hotfix 브랜치는 main 브랜치로부터 생성되어야 한다.
3. release에서 테스트를 진행하며 발견한 버그 수정은 develop에 머지되어야 한다.
4. hotfix에서 수정/반영된 코드 역시 develop 브랜치에 머지되어야 한다.
5. main / development는 origin에 상시 존재하며, 그 외 브랜치는 머지 후 삭제한다.
6. release와 hotfix 브랜치의 머지가 완료되면 release 정보를 최신화한다.

### 2.3 Github-flow
Git-flow는 체계적이지만 복잡하고 거쳐야할 단계가 많다는 단점이 존재한다.
이러한 단점을 보완하여 소규모 팀 단위에 적합한 전략이 Github-flow 전략이다.
**자동화**라는 특징을 가지지만 필수적인 요소는 아니며,   
Git-flow에 비해 흐름과 가이드 라인이 단순한다.
기본적으로 main 브랜치만을 필수적으로 관리하며,
그 외 브랜치에는 큰 제약을 두지 않기에 모든 브랜치는 main으로부터 생성한다.

#### 2.3.1 Github-flow 적용 가이드
1. 브랜치의 제약이 없는 만큼 브랜치 이름을 직관적이고 명확하게 짓는다.
2. main 브랜치는 항상 최신 상태여야 하며, 코드 리뷰와 승인에 대해 엄격하게 관리한다.
3. Git-flow 전략보다 커밋 메시지를 상세하게 작성한다.
4. origin에는 main 브랜치 외에 현재 작업 중인 브랜치를 수시로 push하고 공유한다.
5. 꼭 머지를 위해서가 아니더라도 수시로 PR하여 코드 리뷰 또는 도움을 요청한다.
6. (Optional) main에 머지가 완료될 경우에는 즉시 배포되어야 한다.(w. CI/CD)

### 2.4 Git 브랜치 전략 Summary
프로젝트의 규모, 기간, 인원 등을 고려하여 적절한 Git 브랜치 전략을 선택해야 한다.
어떤 전략을 취할 것인지 보다, 어떤 규칙을 가지고 전략을 운영할 지가 더욱 중요하다!

## 3. 실전에 적용하기
컨벤션은 좋은 기준을 제시하지만 반드시 정확하게 따를 필요는 없다.
소규모의 사이드 프로젝트에 적용할 규칙을 나름대로 정해보자.

### 3.1 커밋 컨벤션
**emoji type: detail**
- ✨ feat: 새로운 기능 추가 작업
- 🐛 fix: 버그 수정과 관련된 작업
- 💄 design: UI 관련 디자인 변경 작업
- ✅ test: 테스트 코드를 추가/수정할 경우
- 📝 docs: 문서화와 관련된 작업
- 🔨 refactor: 프로덕션 코드 리팩토링 작업
- 🔀 merge: 다른 브랜치를 머지할 경우
- 🔧 chore: 프로젝트 세팅, 빌드 태스트 업데이트, 패키지 매니저 설정 작업(프로덕션 코드 변경 X)
- 🎨 style: 코드 포맷팅 관련 작업(프로덕션 코드 변경 X)

### 3.2 Github-flow 전략
1. 1.0.0(실제 서비스 출시)까지는 github-flow로 진행
    - x.y.z는 각각 major, minor, patch를 의미한다
2. main 브랜치와 feature-{detail}-{detail}...로 통일하며, 기능 단위로 커밋
3. 최소 1일 1회 이상 origin에 푸쉬하며, main에 merge 후 삭제 및 새로운 브랜치 생성
4. main은 PR -> Review -> Approve 후 머지(CI/CD도 공부해보자)
5. 커밋 메시지는 최대한 상세하게 작성하며, gitemoji는 선택 사항


---

## 4. Semantic Versioning
- \[Major].[MINOR].[PATCH]
### 1. Major: 하위 호환성을 깨뜨리는 중요한 변경이 있을 때
   - 주로 기존 API의 변경이나 기능의 큰 변화를 의미
### 2. Minor: 하위 호환성을 유지하면서 기능이 추가될 때
   - 주로 새로운 기능이 소개되지만, 기존 코드에 영향을 주지 않음
### 3. Patch: 하위 호환성을 유지하면서 기존 기능의 버그를 수정할 때
   - 새로운 기능이나 API 변경없이 오로지 버그 수정과 관련
> [!NOTE]
   > Major 버전 업데이트가 아니라면 패키지의 사용 방법이 변하지 않는다고 봐도 무방하다. "^"을 사용해서 Major 버전 업데이트 외의 모든 버전은 최신 버전으로 유지할 수 있다.


> 추천 자료
>> [Article] Udacity, https://udacity.github.io/git-styleguide/